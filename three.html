<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Interactive Sculpture Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            overflow: hidden;
            background: #000;
            color: #fff;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 30px 20px;
        }
        
        .title-container {
            text-align: center;
            margin-bottom: 20px;
            animation: fadeInDown 1.5s ease-out;
            pointer-events: all;
            width: 100%;
            max-width: 1200px;
        }
        
        h1 {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #FFA700, #7C3AED);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 160, 0, 0.3);
        }
        
        .subtitle {
            font-size: clamp(1rem, 2.5vw, 1.8rem);
            max-width: 800px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
            margin: 0 auto;
        }
        
        .controls {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 15px;
            animation: fadeInUp 1.8s ease-out;
            pointer-events: all;
            flex-wrap: wrap;
            padding: 0 10px;
        }
        
        button {
            pointer-events: all;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-width: 120px;
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .artwork-selector {
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            display: flex;
            gap: 10px;
            pointer-events: all;
            animation: fadeInRight 1.8s ease-out;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 90px;
        }
        
        .artwork-thumbnail {
            width: 70px;
            height: 70px;
            border-radius: 12px;
            cursor: pointer;
            border: 3px solid transparent;
            overflow: hidden;
            transition: all 0.3s ease;
            background-size: cover;
            background-position: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .artwork-thumbnail:hover {
            transform: scale(1.1);
            border-color: #FFA700;
            box-shadow: 0 0 15px rgba(255, 160, 0, 0.5);
        }
        
        .artwork-thumbnail.active {
            border-color: #7C3AED;
            box-shadow: 0 0 20px rgba(124, 58, 237, 0.7);
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.5s ease;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-text {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #FFA700;
        }
        
        .loader {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255, 160, 0, 0.1);
            border-top-color: #FFA700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .instructions {
            position: absolute;
            bottom: 100px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            animation: fadeInUp 2s ease-out;
            pointer-events: all;
        }
        
        .shape-selector {
            position: absolute;
            left: 20px;
            bottom: 100px;
            pointer-events: all;
            animation: fadeInLeft 1.8s ease-out;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 40%;
        }
        
        .shape-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .shape-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .shape-btn.active {
            background: rgba(124, 58, 237, 0.3);
            border-color: #7C3AED;
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.5);
        }
        
        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .title-container {
                margin-bottom: 30px;
            }
            
            .artwork-selector {
                top: auto;
                bottom: 170px;
                right: 50%;
                transform: translateX(50%);
                max-width: 300px;
            }
            
            .shape-selector {
                position: static;
                transform: none;
                justify-content: center;
                margin: 20px auto 0;
                bottom: auto;
                left: auto;
                width: 100%;
                max-width: 500px;
            }
            
            .instructions {
                bottom: 150px;
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.3rem;
            }
            
            .controls {
                gap: 10px;
                padding: 0 15px;
            }
            
            button {
                font-size: 0.85rem;
                padding: 8px 16px;
                min-width: 100px;
            }
            
            .shape-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .artwork-thumbnail {
                width: 60px;
                height: 60px;
            }
            
            .artwork-selector {
                bottom: 140px;
            }
            
            .instructions {
                bottom: 180px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .controls {
                gap: 8px;
                flex-direction: column;
                width: 90%;
                max-width: 300px;
            }
            
            button {
                width: 100%;
                font-size: 0.8rem;
                padding: 10px 20px;
            }
            
            .shape-selector {
                gap: 8px;
            }
            
            .shape-btn {
                padding: 5px 10px;
                font-size: 0.75rem;
            }
            
            .artwork-thumbnail {
                width: 50px;
                height: 50px;
            }
            
            .artwork-selector {
                bottom: 170px;
            }
            
            .instructions {
                bottom: 260px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loading">
        <div class="loading-text">Loading 3D Experience...</div>
        <div class="loader"></div>
    </div>

    <div id="canvas-container"></div>
    
    <div class="ui-overlay">
        <div class="title-container">
            <h1>3D Interactive Gallery</h1>
            <p class="subtitle">Experience artworks as 3D models. Move your finger to alter the perspective.</p>
        </div>
        
        <div class="artwork-selector">
            <div class="artwork-thumbnail active" data-index="0" style="background-image: url('./img/image1.jpg');"></div>
            <div class="artwork-thumbnail" data-index="1" style="background-image: url('./img/image2.jpg');"></div>
            <div class="artwork-thumbnail" data-index="2" style="background-image: url('./img/image3.jpg');"></div>
            <div class="artwork-thumbnail" data-index="3" style="background-image: url('./img/image4.jpg');"></div>
        </div>
        
        <div class="instructions">
            Drag to rotate • Scroll to zoom • Touch to transform
        </div>
        
        <div class="shape-selector">
            <button class="shape-btn active" data-shape="box">Box</button>
            <button class="shape-btn" data-shape="sphere">Sphere</button>
            <button class="shape-btn" data-shape="cylinder">Cylinder</button>
            <button class="shape-btn" data-shape="plane">Plane</button>
        </div>
        
        <div class="controls">
            <button id="auto-rotate">Toggle Rotation</button>
            <button id="depth-slider">Change Depth</button>
            <button id="back-gallery">Back to Gallery</button>
        </div>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        // Global variables
        let scene, camera, renderer, currentModel;
        let mouseX = 0, mouseY = 0;
        let targetRotationX = 0, targetRotationY = 0;
        let isMouseDown = false;
        let autoRotate = true;
        let artTextures = [];
        let currentArtwork = 0;
        let currentShape = 'box';
        let depth = 0.5; // Default depth for 3D models
        let isDepthSliderOpen = false;
        
        const artworks = [
            { title: "Cosmic Dance", description: "How would this 3D model look if it reflected your touch?" },
            { title: "Digital Nebula", description: "Explore the boundaries of digital creativity in 3D." },
            { title: "Neon Dreams", description: "A visualization of future possibilities in three dimensions." },
            { title: "Quantum Flux", description: "Where reality meets imagination in 3D space." }
        ];
        
        // Initialize the scene
        function init() {
            // Scene setup
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x000000, 1, 10);
            
            // Camera setup
            const aspect = window.innerWidth / window.innerHeight;
            camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 1000);
            camera.position.z = 3;
            
            // Renderer setup
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            document.getElementById('canvas-container').appendChild(renderer.domElement);
            
            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 1);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            const directionalLight2 = new THREE.DirectionalLight(0x7C3AED, 0.5);
            directionalLight2.position.set(-1, -1, -1);
            scene.add(directionalLight2);
            
            const pointLight = new THREE.PointLight(0xFFA700, 0.5);
            pointLight.position.set(0, 0, 2);
            scene.add(pointLight);
            
            // Load textures
            const loader = new THREE.TextureLoader();
            for (let i = 1; i <= 4; i++) {
                // Enable texture loading and set up texture options
                const texture = loader.load(`./img/image${i}.jpg`);
                texture.wrapS = THREE.RepeatWrapping;
                texture.wrapT = THREE.RepeatWrapping;
                artTextures.push(texture);
            }
            
            // Create initial model
            createModel(0);
            
            // Event listeners
            document.addEventListener('mousemove', onMouseMove, false);
            document.addEventListener('mouseup', onMouseUp, false);
            document.addEventListener('mousedown', onMouseDown, false);
            window.addEventListener('resize', onWindowResize, false);
            
            // Touch events for mobile
            document.addEventListener('touchstart', onTouchStart, false);
            document.addEventListener('touchmove', onTouchMove, false);
            document.addEventListener('touchend', onTouchEnd, false);
            
            // Button events
            document.getElementById('auto-rotate').addEventListener('click', toggleRotation);
            document.getElementById('depth-slider').addEventListener('click', toggleDepthSlider);
            document.getElementById('back-gallery').addEventListener('click', backToGallery);
            
            // Artwork selector events
            document.querySelectorAll('.artwork-thumbnail').forEach((thumb, index) => {
                thumb.addEventListener('click', () => {
                    selectArtwork(index);
                });
            });
            
            // Shape selector events
            document.querySelectorAll('.shape-btn').forEach((btn) => {
                btn.addEventListener('click', (e) => {
                    selectShape(e.target.dataset.shape);
                });
            });
            
            // Wheel event for zoom
            window.addEventListener('wheel', onMouseWheel, false);
            
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
            }, 1000);
            
            // Start animation
            animate();
        }
        
        function createModel(artIndex, shape = currentShape) {
            // Remove existing model
            if (currentModel) {
                scene.remove(currentModel);
                currentModel.traverse(child => {
                    if (child.isMesh) {
                        child.geometry.dispose();
                        child.material.dispose();
                    }
                });
            }
            
            // Create geometry based on selected shape - increased sizes
            let geometry;
            
            switch(shape) {
                case 'sphere':
                    geometry = new THREE.SphereGeometry(3.5, 32, 32, 0, Math.PI * 2, 0, Math.PI);
                    break;
                case 'cylinder':
                    geometry = new THREE.CylinderGeometry(2.5, 2.5, 6, 32);
                    break;
                case 'plane':
                    geometry = new THREE.PlaneGeometry(5, 5, 32, 32);
                    break;
                case 'box':
                default:
                    geometry = new THREE.BoxGeometry(4.5, 4.5, depth, 32, 32, 1);
                    break;
            }
            
            // Create material with texture
            const material = new THREE.MeshStandardMaterial({
                map: artTextures[artIndex],
                metalness: 0.3,
                roughness: 0.4,
                bumpScale: 0.05,
                normalScale: new THREE.Vector2(0.5, 0.5),
                side: THREE.DoubleSide,
            });
            
            // Create model
            currentModel = new THREE.Mesh(geometry, material);
            currentModel.castShadow = true;
            currentModel.receiveShadow = true;
            scene.add(currentModel);
            
            // If we have a plane, add slight depth to make it 3D
            if (shape === 'plane') {
                // Create a box with one very thin dimension
                geometry = new THREE.BoxGeometry(5, 5, 0.1);
                currentModel = new THREE.Mesh(geometry, material);
                scene.add(currentModel);
            }
            
            // Add edges to the model for better definition
            const edgeGeometry = new THREE.EdgesGeometry(geometry);
            const edgeMaterial = new THREE.LineBasicMaterial({ color: 0x000000, linewidth: 1 });
            const edges = new THREE.LineSegments(edgeGeometry, edgeMaterial);
            currentModel.add(edges);
            
            // Update active thumbnail
            document.querySelectorAll('.artwork-thumbnail').forEach((thumb, index) => {
                if (index === artIndex) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
        }
        
        function selectArtwork(index) {
            currentArtwork = index;
            createModel(index, currentShape);
        }
        
        function selectShape(shape) {
            currentShape = shape;
            
            // Update active shape button
            document.querySelectorAll('.shape-btn').forEach(btn => {
                if (btn.dataset.shape === shape) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Recreate model with new shape
            createModel(currentArtwork, shape);
        }
        
        function toggleDepthSlider() {
            // This would open a slider to adjust depth of the model
            // For simplicity, we'll just cycle through different depths
            depth = depth === 0.5 ? 1 : depth === 1 ? 1.5 : 0.5;
            createModel(currentArtwork, currentShape);
        }
        
        function toggleRotation() {
            autoRotate = !autoRotate;
        }
        
        function backToGallery() {
            window.location.href = 'home.html';
        }
        
        function onMouseMove(event) {
            event.preventDefault();
            
            if (isMouseDown) {
                mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
                
                targetRotationY = mouseX * Math.PI;
                targetRotationX = mouseY * Math.PI * 0.5;
            }
        }
        
        function onMouseDown(event) {
            isMouseDown = true;
        }
        
        function onMouseUp(event) {
            isMouseDown = false;
        }
        
        function onMouseWheel(event) {
            // Zoom in/out with mouse wheel - adjusted for closer camera
            const zoomSpeed = 0.08;
            camera.position.z += event.deltaY * zoomSpeed * 0.01;
            
            // Limit zoom range - adjusted for closer camera
            camera.position.z = Math.max(1.5, Math.min(6, camera.position.z));
        }
        
        // Touch events for mobile
        let touchStartX = 0;
        let touchStartY = 0;
        
        function onTouchStart(event) {
            if (event.touches.length === 1) {
                touchStartX = event.touches[0].clientX;
                touchStartY = event.touches[0].clientY;
                isMouseDown = true;
            }
        }
        
        function onTouchMove(event) {
            if (event.touches.length === 1 && isMouseDown) {
                event.preventDefault();
                
                const deltaX = event.touches[0].clientX - touchStartX;
                const deltaY = event.touches[0].clientY - touchStartY;
                
                mouseX = deltaX / window.innerWidth;
                mouseY = -deltaY / window.innerHeight;
                
                targetRotationY = mouseX * Math.PI;
                targetRotationX = mouseY * Math.PI * 0.5;
                
                touchStartX = event.touches[0].clientX;
                touchStartY = event.touches[0].clientY;
            }
        }
        
        function onTouchEnd(event) {
            isMouseDown = false;
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Smoothly rotate model
            if (currentModel && autoRotate && !isMouseDown) {
                currentModel.rotation.y += 0.005;
                currentModel.rotation.x += 0.002;
            } else if (currentModel) {
                // Manual rotation
                if (Math.abs(targetRotationX) > 0.01 || Math.abs(targetRotationY) > 0.01) {
                    currentModel.rotation.y += (targetRotationY - currentModel.rotation.y) * 0.05;
                    currentModel.rotation.x += (targetRotationX - currentModel.rotation.x) * 0.05;
                    
                    // Add some wobble effect while dragging
                    currentModel.rotation.z = Math.sin(Date.now() * 0.001) * 0.1 * (Math.abs(mouseX) + Math.abs(mouseY));
                }
            }
            
            // Render the scene
            renderer.render(scene, camera);
        }
        
        // Initialize when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>